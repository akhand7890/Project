<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HomeAway</title>
    <link rel="stylesheet" href="/css/listings/index.css" />
    <!-- Poppins Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />
  </head>
  <body>
    <!-- ---------- Header ---------- -->
    <header class="header">
      <!-- Left: Logo + Become a host -->
      <div class="header__left">
        <a class="logo" href="/listings">
          <img src="/images/logo.png" alt="homeAway logo" />
          <span class="logo-text">homeAway</span>
        </a>
      </div>

      <!-- Right: Auth links (use your own URLs later) -->
      <nav class="header__right">
        <a href="/listings/new" class="btn-host">Airbnb your home</a>
        <% if (user) { %>
        <a href="/user/logout" class="nav-link">Log out</a>
        <% } else { %>
        <a href="/user/signup" class="nav-link"><b>Sign Up</b></a>
        <a href="/user/login" class="nav-link"><b>Log in</b></a>
        <% } %>
      </nav>
    </header>

    <!-- flash Message -->
    <% if (success && success.length) { %>
    <div class="alert alert-success"><%= success[0] %></div>
    <% } %> <% if (error && error.length) { %>
    <div class="alert alert-danger"><%= error[0] %></div>
    <% } %> <% if (info && info.length) { %>
    <div class="alert alert-info"><%= info[0] %></div>
    <% } %>

  <div class="filters-bar">
  <div class="filters">
    <div class="filter"><i class="fa-solid fa-fire"></i><p>Trending</p></div>
    <div class="filter"><i class="fa-solid fa-bed"></i><p>Rooms</p></div>
    <div class="filter"><i class="fa-solid fa-water-ladder"></i><p>Pools</p></div>
    <div class="filter"><i class="fa-solid fa-tractor"></i><p>Farms</p></div>
    <div class="filter"><i class="fa-solid fa-city"></i><p>Cities</p></div>
    <div class="filter"><i class="fa-solid fa-mountain-sun"></i><p>Mountains</p></div>
    <div class="filter"><i class="fa-solid fa-umbrella-beach"></i><p>Beach</p></div>
    <div class="filter"><i class="fa-solid fa-snowflake"></i><p>Arctic</p></div>
    <div class="filter"><i class="fa-solid fa-paw"></i><p>Wildlife</p></div>
    <div class="filter"><i class="fa-solid fa-sun"></i><p>Desert</p></div>
  </div>

  <div class="filter-controls">
    <button class="filter-btn"><i class="fa-solid fa-sliders"></i> Filters</button>

    <div class="tax-toggle">
      <label>Display total before taxes</label>
      <div class="switch" id="toggleSwitch">
        <div class="slider"></div>
      </div>
    </div>
  </div>
</div>


    </div>

    <!-- ---------- Main Content ---------- -->
    <main class="content">
      <div class="container-box">
        <% data.forEach(item => { %>
        <div class="item-card">
          <a href="/listings/view/<%= item._id %>">
            <img
              class="item-image"
              src="<%= item.image.url %>"
              alt="<%= item.title %> image"
            />
          </a>
          <div class="item-details">
            <a
              class="item-title"
              href="/listings/view/<%= item._id %>"
              ><%= item.title %> in <%= item.location %></a
            >
            <span class="item-price"
              >&#8377; <%= item.price.toLocaleString() %> / night&nbsp;<i class="tax">&nbsp;18% GST</i></span
            >
          </div>
        </div>
        <% }) %>
      </div>
    </main>
    <script>
  const toggle = document.getElementById('toggleSwitch');
  toggle.addEventListener('click', () => {
    toggle.classList.toggle('on')
    let taxInfo = document.getElementsByClassName("tax");
    for(info of taxInfo){
      if(info.style.display != 'inline'){
        info.style.display = 'inline'
      }else{
        info.style.display = 'none'
      }
    }
  });
</script>
    <script>
      setTimeout(() => {
        document.querySelectorAll(".alert").forEach((alert) => {
          alert.classList.add("hide");
          setTimeout(() => alert.remove(), 400); // remove after animation
        });
      }, 3000); // fades out after 3 seconds
    </script>
  </body>
</html>
